From 8ebae6fe35566e5ab1f5ab0def9beaa33aaead62 Mon Sep 17 00:00:00 2001
From: Tobias Gunkel <hennymcc@yahoo.de>
Date: Sun, 16 Oct 2016 15:32:59 +0200
Subject: [PATCH] wvm: fix access to ReadOptions

Change-Id: Ie15023474191aebb4f188894c343f8c527511dc7
---
 media/libstagefright/MediaSource.cpp | 33 +++++++++++++++++++++++++++++++++
 1 file changed, 33 insertions(+)

diff --git a/media/libstagefright/MediaSource.cpp b/media/libstagefright/MediaSource.cpp
index a17757a..ddbc4a5 100644
--- a/media/libstagefright/MediaSource.cpp
+++ b/media/libstagefright/MediaSource.cpp
@@ -23,3 +23,36 @@ MediaSource::MediaSource() {}
 MediaSource::~MediaSource() {}
 
 }  // namespace android
+
+extern "C" {
+
+/*
+extern bool _ZNK7android12IMediaSource11ReadOptions9getSeekToEPxPNS1_8SeekModeE(void *readOptions, int64_t *time_us, android::IMediaSource::ReadOptions::SeekMode *mode);
+extern int64_t _ZNK7android12IMediaSource11ReadOptions9getLateByEv(void *readOptions);
+*/
+
+bool _ZNK7android11MediaSource11ReadOptions14getNonBlockingEv(android::IMediaSource::ReadOptions *readOptions) {
+    ALOGW("_ZNK7android11MediaSource11ReadOptions14getNonBlockingEv");
+    bool res = readOptions->getNonBlocking();
+    ALOGW("_ZNK7android11MediaSource11ReadOptions14getNonBlockingEv %d", res);
+    return res;
+}
+
+bool _ZNK7android11MediaSource11ReadOptions9getSeekToEPxPNS1_8SeekModeE(android::IMediaSource::ReadOptions *readOptions, int64_t *time_us, android::IMediaSource::ReadOptions::SeekMode *mode) {
+    //return _ZNK7android12IMediaSource11ReadOptions9getSeekToEPxPNS1_8SeekModeE(readOptions, time_us, mode);
+    ALOGW("_ZNK7android11MediaSource11ReadOptions9getSeekToEPxPNS1_8SeekModeE");
+    bool res = readOptions->getSeekTo(time_us, mode);
+    ALOGW("_ZNK7android11MediaSource11ReadOptions9getSeekToEPxPNS1_8SeekModeE %lld, %d, %d", *time_us, *mode, res);
+    return res;
+}
+
+int64_t _ZNK7android11MediaSource11ReadOptions9getLateByEv(android::IMediaSource::ReadOptions *readOptions) {
+    //return _ZNK7android12IMediaSource11ReadOptions9getLateByEv(readOptions);
+    ALOGW("_ZNK7android11MediaSource11ReadOptions9getLateByEv");
+    int64_t res = readOptions->getLateBy();
+    ALOGW("_ZNK7android11MediaSource11ReadOptions9getLateByEv %lld", res);
+    return res;
+}
+
+}
+
-- 
2.7.4
